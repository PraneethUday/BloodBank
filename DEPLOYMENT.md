# BloodBank Application Deployment Guide

## Render Deployment

This application is configured for deployment on Render with two services:

- **Backend API** (Node.js)
- **Frontend** (Static Site)

### Quick Deploy

1. **Push to GitHub**

   ```bash
   git add .
   git commit -m "Ready for Render deployment"
   git push origin main
   ```

2. **Deploy on Render**
   - Go to [Render Dashboard](https://dashboard.render.com/)
   - Click "New" â†’ "Blueprint"
   - Connect your GitHub repository
   - Render will automatically detect `render.yaml` and create both services

### Environment Variables

#### Backend (bloodbank-api)

Set these in Render dashboard:

- `MONGODB_URI`: Your MongoDB Atlas connection string
  ```
  mongodb+srv://praneethp227:root%40123@cluster0.dt3juch.mongodb.net/bloodbank
  ```
- `JWT_SECRET`: Auto-generated by Render (or set your own)
- `NODE_ENV`: `production`
- `PORT`: `3002`

#### Frontend (bloodbank-client)

- `VITE_API_URL`: Your backend URL (e.g., `https://bloodbank-api.onrender.com`)

### Manual Deployment Steps

If not using Blueprint (render.yaml):

#### 1. Deploy Backend

1. New Web Service
2. Connect repository
3. Settings:
   - **Build Command**: `cd server && npm install`
   - **Start Command**: `cd server && npm start`
   - **Environment**: Node
   - Add environment variables above

#### 2. Deploy Frontend

1. New Static Site
2. Connect repository
3. Settings:
   - **Build Command**: `cd client && npm install && npm run build`
   - **Publish Directory**: `client/dist`
   - Add `VITE_API_URL` pointing to your backend URL

### Post-Deployment

1. **Seed Database** (if needed):

   ```bash
   # SSH into backend service or run locally pointing to production DB
   node server/scripts/seedData.js
   ```

2. **Update Frontend API URL**:
   - After backend is deployed, update frontend's `VITE_API_URL` to backend URL
   - Trigger frontend redeploy

### Local Development

1. **Server**:

   ```bash
   cd server
   cp .env.example .env
   # Edit .env with your values
   npm install
   npm run dev
   ```

2. **Client**:

   ```bash
   cd client
   cp .env.example .env
   # Edit .env with your values
   npm install
   npm run dev
   ```

3. **Full App**:
   ```bash
   npm install
   npm start
   ```

### Troubleshooting

- **CORS errors**: Ensure backend CORS is configured (already done)
- **Database connection**: Verify MongoDB URI and whitelist Render IPs (or use 0.0.0.0/0)
- **Build failures**: Check build logs in Render dashboard
- **API not found**: Verify frontend `VITE_API_URL` matches backend URL
